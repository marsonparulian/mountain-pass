(this["webpackJsonpmountain-pass"]=this["webpackJsonpmountain-pass"]||[]).push([[0],{152:function(e,n,t){},153:function(e,n,t){"use strict";t.r(n);var r=t(1),s=t.n(r),c=t(17),i=t.n(c),a=t(4),l=t(5),o=t(62),u=t(2),d=t.n(u),v={UPDATE_FIELD_VALUE:"UPDATE_FIELD_VALUE",SHOW_SERVICE_FORM:"SHOW_SERVICE_FORM",HIDE_SERVICE_FORM:"HIDE_SERVICE_FORM",FETCH_SERVICES_STARTED:"FETCH_SERVICES_STARTED",FETCH_SERVICES_SUCCESS:"FETCH_SERVICES_SUCCESS",FETCH_SERVICES_FAILURE:"FETCH_SERVICES_FAILURE",SAVE_SERVICE_STARTED:"SAVE_SERVICE_STARTED",SAVE_SERVICE_SUCCESS:"SAVE_SERVICE_SUCCESS",SAVE_SERVICE_FAILURE:"SAVE_SERVICE_FAILURE"},b=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SHOW_SERVICE_FORM:return(e=d()(n)).showModal=!0,e;case v.HIDE_SERVICE_FORM:return(e=d()(n)).showModal=!1,e;default:return n}},j=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.FETCH_SERVICES_SUCCESS:return(e=d()(n)).services=t.payload.services,e;default:return n}},h={savedService:!1,fields:{name:{value:"",msg:""},version:{value:"",msg:""}}},p=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.HIDE_SERVICE_FORM:return(e=d()(n)).savedService=d()(h.savedService),e;case v.SAVE_SERVICE_SUCCESS:return(e=d()(n)).fields=d()(h.fields),e.savedService=d()(t.payload.service),e;case v.SAVE_SERVICE_FAILURE:e=d()(n);var r=t.payload.fields;return e.fields.name.msg=r.name.msg||h.fields.name.msg,e.fields.version.msg=r.version.msg||h.fields.version.msg,e;case v.UPDATE_FIELD_VALUE:return(e=d()(n)).fields[t.payload.field].value=t.payload.value,e;default:return n}},m={isBusy:!1,showModal:!1,msg:{status:"info",msg:"default message"}},f={services:null},O=Object(l.c)({app:b,services:j,serviceForm:p}),S={app:m,services:f,serviceForm:h},E=Object(l.d)(O,S,Object(l.a)(o.a)),x=t(7),C=t(8),_=t(10),y=t(9),V=t(13),g=t(0),F=function(e){return Object(g.jsx)("button",Object(V.a)(Object(V.a)({className:"box btn btn-lg "},e),{},{children:e.children}))},A=function(e){return Object(g.jsxs)("div",{id:"quick-links",children:[Object(g.jsx)("div",{className:"section-header__1",children:Object(g.jsx)("h2",{children:"Quick Links"})}),Object(g.jsxs)("div",{children:[Object(g.jsx)(F,{type:"button",className:"btn btn-primary btn-lg",onClick:e.handleAddService,children:"Add Service"}),Object(g.jsx)(F,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Gatsby Website"}),Object(g.jsx)(F,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Node Project"})]})]})},R=t(3),I=t.n(R),k=t(12),T=t(41),N=t.n(T),w="bWFyc29uOmVSZDc",D=function(){var e=Object(k.a)(I.a.mark((function e(){var n,t,r=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:1,t="https://interview-web-service.mountainpass.com.au/api/v1/projects?page=".concat(n),e.prev=3,e.abrupt("return",N()(t,{method:"GET",headers:{Authorization:"Basic ".concat(w)}}));case 7:e.prev=7,e.t0=e.catch(3),console.error("Error fetching services"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(k.a)(I.a.mark((function e(){var n,t,r,s,c,i,a,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(null,1);case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,r=d()(t.data),1!==(s=t.totalPages)){e.next=12;break}return e.abrupt("return",r);case 12:if(!(s>2)){e.next=30;break}for(c=[],i=2;i<=s;i++)c.push(D(null,i));return e.next=17,Promise.all(c);case 17:a=e.sent,l=0;case 19:if(!(l<a.length)){e.next=27;break}return e.next=22,a[l].json();case 22:o=e.sent,r=r.concat(o.data);case 24:l++,e.next=19;break;case 27:return e.abrupt("return",r);case 30:return console.error("Invalid total pages when fetching services"),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(k.a)(I.a.mark((function e(n){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={isValid:!0,fields:{name:{msg:""},version:{msg:""}}},n.name||(t.isValid=!1,t.fields.name.msg="Name of service is required"),n.version||(t.isValid=!1,t.fields.version.msg="Version is required"),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(e){try{var n=JSON.stringify(e);return N()("https://interview-web-service.mountainpass.com.au/api/v1/projects",{method:"POST",headers:{Authorization:"Basic ".concat(w),"Content-Type":"application/json"},body:n})}catch(t){console.error("Error POST saving a service"),console.error(t)}},M=function(){return function(){var e=Object(k.a)(I.a.mark((function e(n){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,n(P(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},P=function(e){return{type:v.FETCH_SERVICES_SUCCESS,payload:{services:e}}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:v.SHOW_SERVICE_FORM,payload:{serviceId:e}}},B=function(){return{type:v.HIDE_SERVICE_FORM}},q=function(e){return function(){var n=Object(k.a)(I.a.mark((function n(t){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(J()),n.next=3,L(e);case 3:if((r=n.sent).isValid){n.next=7;break}return t(G({fields:r.fields})),n.abrupt("return");case 7:return n.next=9,H(e);case 9:t(z(e)),t(M());case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},J=function(){return{type:v.SAVE_SERVICE_STARTED}},z=function(e){return{type:v.SAVE_SERVICE_SUCCESS,payload:{service:e}}},G=function(e){return{type:v.SAVE_SERVICE_FAILURE,payload:e}},K=Object(a.b)((function(e){return e}),(function(e){return Object(l.b)({handleAddService:W},e)}))(A),Q=t(11),Z=function(e){return Object(g.jsxs)("div",{className:"service-item",children:[Object(g.jsx)("h3",{children:e.name}),Object(g.jsxs)("div",{children:["version : ",e.version]})]})},X=function(e){var n=1;return Object(g.jsx)("div",{className:"group",children:e.services.map((function(e){return Object(g.jsx)(Z,{name:e.name,version:e.version},n++)}))})},Y=t(18),$=function(e){return Object(g.jsx)("button",Object(V.a)(Object(V.a)({},e),{},{children:e.children}))};$.proptTypes={children:t.n(Y).a.string.isRequired};var ee=$,ne=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(x.a)(this,t),(r=n.call(this,e)).handleAddService=r.handleAddService.bind(Object(Q.a)(r)),r}return Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchServices()}},{key:"handleAddService",value:function(){this.props.handleAddService()}},{key:"render",value:function(){var e=Object(g.jsx)("div",{children:"Loading.."});return Array.isArray(this.props.services.services)&&(e=Object(g.jsx)(X,{services:this.props.services.services})),Object(g.jsxs)("div",{id:"service-list-panel",className:"page__default",children:[Object(g.jsx)("div",{className:"section-header__2",children:Object(g.jsx)("h2",{children:"Services"})}),Object(g.jsx)("div",{children:Object(g.jsx)(ee,{className:"btn btn-primary",onClick:this.handleAddService,children:"Add Service"})}),Object(g.jsx)("div",{children:e}),Object(g.jsx)(ee,{type:"button",onClick:this.handleAddService,className:"button-box btn btn-block btn-primary",children:"Add Service"})]})}}]),t}(s.a.Component),te=Object(a.b)((function(e){return e}),(function(e){return Object(l.b)({handleAddService:W,fetchServices:M},e)}))(ne),re=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(K,{}),Object(g.jsx)(te,{})]})},se=t(42),ce=t.n(se),ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:v.UPDATE_FIELD_VALUE,payload:{field:e,value:n}}},ae=function(e){return Object(g.jsx)("input",Object(V.a)({className:"user-input"},e))},le=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(x.a)(this,t),(r=n.call(this,e)).handleCancel=r.handleCancel.bind(Object(Q.a)(r)),r.updateFieldValue=r.updateFieldValue.bind(Object(Q.a)(r)),r.handleSubmitForm=r.handleSubmitForm.bind(Object(Q.a)(r)),r}return Object(C.a)(t,[{key:"handleCancel",value:function(){this.props.handleCancel()}},{key:"updateFieldValue",value:function(e,n){this.props.updateFieldValue(e,n.target.value)}},{key:"handleSubmitForm",value:function(e){e.preventDefault();var n=this.props.serviceForm.fields,t={name:n.name.value,version:n.version.value};this.props.saveService(t)}},{key:"render",value:function(){var e=this,n=this.props.serviceForm.fields;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Add Service"}),Object(g.jsxs)("form",{method:"POST",onSubmit:this.handleSubmitForm,children:[Object(g.jsx)("div",{className:"form-row",children:Object(g.jsxs)("div",{className:"col-md-7 col-lg-4",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name"}),Object(g.jsx)(ae,{name:"name",id:"name",value:n.name.value,onChange:function(n){return e.updateFieldValue("name",n)},className:"form-control","aria-describedby":"name-help-block"}),Object(g.jsx)("small",{id:"name-help-block",className:"form-text text-muted",children:n.name.msg})]})}),Object(g.jsx)("div",{className:"form-row",children:Object(g.jsxs)("div",{className:"col-sm-2 col-lg-1",children:[Object(g.jsx)("label",{htmlFor:"version",children:"Version"}),Object(g.jsx)(ae,{name:"version",id:"version",value:n.version.value,onChange:function(n){return e.updateFieldValue("version",n)},className:"form-control","aria-describedby":"version-help-block"}),Object(g.jsx)("small",{id:"version-help-block",className:"form-text text-muted",children:n.version.msg})]})}),Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{type:"button",className:"btn btn-light",onClick:this.handleCancel,children:"Cancel"}),Object(g.jsx)(ee,{type:"submit",className:"btn btn-primary",children:"Add Service"})]})]})]})}}]),t}(s.a.Component),oe=Object(a.b)((function(e){return e}),(function(e){return Object(l.b)({handleCancel:B,updateFieldValue:ie,saveService:q},e)}))(le),ue=function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Saved"}),Object(g.jsxs)("div",{children:["The following service has been successfully saved :",Object(g.jsxs)("ol",{children:[Object(g.jsxs)("li",{children:["Name: ",e.name]}),Object(g.jsxs)("li",{children:["Version: ",e.version]})]})]}),Object(g.jsx)(ee,{className:"btn btn-primary",onClick:e.onDismiss,children:"OK"})]})},de=Object(a.b)((function(e){return{name:e.serviceForm.savedService.name,version:e.serviceForm.savedService.version}}),(function(e){return Object(l.b)({onDismiss:B},e)}))(ue),ve=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(x.a)(this,t),r=n.call(this,e),ce.a.setAppElement("div"),r}return Object(C.a)(t,[{key:"render",value:function(){var e="loading..";return this.props.isOpen&&(e=this.props.savedService?Object(g.jsx)(de,{}):Object(g.jsx)(oe,{})),Object(g.jsx)(ce.a,{contentLabel:"New Service",isOpen:this.props.isOpen,children:e})}}]),t}(s.a.Component);ve.defaultProps={isOpen:!1};var be=ve,je=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(){return Object(x.a)(this,t),n.apply(this,arguments)}return Object(C.a)(t,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(re,{}),Object(g.jsx)(be,{isOpen:this.props.app.showModal,savedService:this.props.serviceForm.savedService})]})}}]),t}(s.a.Component);je.defaultProps={showServiceForm:!1};var he=je,pe=Object(a.b)((function(e){return e}),null)(he);var me=function(){return Object(g.jsx)("div",{id:"app",className:"App",children:Object(g.jsx)(pe,{})})},fe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,154)).then((function(n){var t=n.getCLS,r=n.getFID,s=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),s(e),c(e),i(e)}))};t(152);i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(a.a,{store:E,children:Object(g.jsx)(me,{})})}),document.getElementById("root")),fe()}},[[153,1,2]]]);
//# sourceMappingURL=main.71b333dc.chunk.js.map