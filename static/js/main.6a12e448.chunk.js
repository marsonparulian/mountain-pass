(this["webpackJsonpmountain-pass"]=this["webpackJsonpmountain-pass"]||[]).push([[0],{152:function(e,n,t){},153:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(17),s=t.n(c),i=t(5),l=t(6),o=t(62),u=t(2),d=t.n(u),b={UPDATE_FIELD_VALUE:"UPDATE_FIELD_VALUE",SHOW_SERVICE_FORM:"SHOW_SERVICE_FORM",HIDE_SERVICE_FORM:"HIDE_SERVICE_FORM",FETCH_SERVICES_STARTED:"FETCH_SERVICES_STARTED",FETCH_SERVICES_SUCCESS:"FETCH_SERVICES_SUCCESS",FETCH_SERVICES_FAILURE:"FETCH_SERVICES_FAILURE",SAVE_SERVICE_STARTED:"SAVE_SERVICE_STARTED",SAVE_SERVICE_SUCCESS:"SAVE_SERVICE_SUCCESS",SAVE_SERVICE_FAILURE:"SAVE_SERVICE_FAILURE"},v=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SAVE_SERVICE_SUCCESS:return(e=d()(n)).showModal=!1,e;case b.SHOW_SERVICE_FORM:return(e=d()(n)).showModal=!0,e;case b.HIDE_SERVICE_FORM:return(e=d()(n)).showModal=!1,e;default:return n}},h=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.FETCH_SERVICES_SUCCESS:return(e=d()(n)).services=t.payload.services,e;default:return n}},p={saveSuccess:!1,fields:{name:{value:"",msg:""},version:{value:"",msg:""}}},j=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SAVE_SERVICE_SUCCESS:return(e=d()(n)).fields=d()(p.fields),e;case b.SAVE_SERVICE_FAILURE:e=d()(n);var r=t.payload.fields;return e.fields.name.msg=r.name.msg||p.fields.name.msg,e.fields.version.msg=r.version.msg||p.fields.version.msg,e;case b.UPDATE_FIELD_VALUE:return(e=d()(n)).fields[t.payload.field].value=t.payload.value,e;default:return n}},f={isBusy:!1,showModal:!1,msg:{status:"info",msg:"default message"}},m={services:null},S=Object(l.c)({app:v,services:h,serviceForm:j}),E={app:f,services:m,serviceForm:p},O=Object(l.d)(S,E,Object(l.a)(o.a)),x=t(7),C=t(8),_=t(10),V=t(9),g=t(13),y=t(0),A=function(e){return Object(y.jsx)("button",Object(g.a)(Object(g.a)({className:"box btn btn-lg "},e),{},{children:e.children}))},F=function(e){return Object(y.jsxs)("div",{id:"quick-links",children:[Object(y.jsx)("div",{className:"section-header__1",children:Object(y.jsx)("h2",{children:"Quick Links"})}),Object(y.jsxs)("div",{children:[Object(y.jsx)(A,{type:"button",className:"btn btn-primary btn-lg",onClick:e.handleAddService,children:"Add Service"}),Object(y.jsx)(A,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Gatsby Website"}),Object(y.jsx)(A,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Node Project"})]})]})},R=t(3),I=t.n(R),k=t(12),T=t(41),w=t.n(T),N="bWFyc29uOmVSZDc",D=function(){var e=Object(k.a)(I.a.mark((function e(){var n,t,r=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:1,t="https://interview-web-service.mountainpass.com.au/api/v1/projects?page=".concat(n),e.prev=3,e.abrupt("return",w()(t,{method:"GET",headers:{Authorization:"Basic ".concat(N)}}));case 7:e.prev=7,e.t0=e.catch(3),console.error("Error fetching services"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(k.a)(I.a.mark((function e(){var n,t,r,a,c,s,i,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(null,1);case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,r=d()(t.data),1!==(a=t.totalPages)){e.next=12;break}return e.abrupt("return",r);case 12:if(!(a>2)){e.next=30;break}for(c=[],s=2;s<=a;s++)c.push(D(null,s));return e.next=17,Promise.all(c);case 17:i=e.sent,l=0;case 19:if(!(l<i.length)){e.next=27;break}return e.next=22,i[l].json();case 22:o=e.sent,r=r.concat(o.data);case 24:l++,e.next=19;break;case 27:return e.abrupt("return",r);case 30:return console.error("Invalid total pages when fetching services"),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(k.a)(I.a.mark((function e(n){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={isValid:!0,fields:{name:{msg:""},version:{msg:""}}},n.name||(t.isValid=!1,t.fields.name.msg="Name of service is required"),n.version||(t.isValid=!1,t.fields.version.msg="Version is required"),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(e){try{var n=JSON.stringify(e);return w()("https://interview-web-service.mountainpass.com.au/api/v1/projects",{method:"POST",headers:{Authorization:"Basic ".concat(N),"Content-Type":"application/json"},body:n})}catch(t){console.error("Error POST saving a service"),console.error(t)}},M=function(){return function(){var e=Object(k.a)(I.a.mark((function e(n){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,n(P(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},P=function(e){return{type:b.FETCH_SERVICES_SUCCESS,payload:{services:e}}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:b.SHOW_SERVICE_FORM,payload:{serviceId:e}}},B=function(){return{type:b.HIDE_SERVICE_FORM}},q=function(e){return function(){var n=Object(k.a)(I.a.mark((function n(t){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(J()),n.next=3,L(e);case 3:if((r=n.sent).isValid){n.next=7;break}return t(G({fields:r.fields})),n.abrupt("return");case 7:return n.next=9,H(e);case 9:t(z()),t(M());case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},J=function(){return{type:b.SAVE_SERVICE_STARTED}},z=function(){return{type:b.SAVE_SERVICE_SUCCESS}},G=function(e){return{type:b.SAVE_SERVICE_FAILURE,payload:e}},Q=Object(i.b)((function(e){return e}),(function(e){return Object(l.b)({handleAddService:W},e)}))(F),Z=t(11),K=function(e){return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:e.name}),Object(y.jsxs)("div",{children:["version : ",e.version]})]})},X=function(e){var n=1;return Object(y.jsx)("div",{className:"group",children:e.services.map((function(e){return Object(y.jsx)(K,{name:e.name,version:e.version},n++)}))})},Y=t(18),$=function(e){return Object(y.jsx)("button",Object(g.a)(Object(g.a)({},e),{},{children:e.children}))};$.proptTypes={children:t.n(Y).a.string.isRequired};var ee=$,ne=function(e){Object(_.a)(t,e);var n=Object(V.a)(t);function t(e){var r;return Object(x.a)(this,t),(r=n.call(this,e)).handleAddService=r.handleAddService.bind(Object(Z.a)(r)),r}return Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchServices()}},{key:"handleAddService",value:function(){this.props.handleAddService()}},{key:"render",value:function(){var e=Object(y.jsx)("div",{children:"Loading.."});return Array.isArray(this.props.services.services)&&(e=Object(y.jsx)(X,{services:this.props.services.services})),Object(y.jsxs)("div",{id:"service-list-panel",className:"page__default",children:[Object(y.jsx)("div",{className:"section-header__2",children:Object(y.jsx)("h2",{children:"Services"})}),Object(y.jsx)("div",{children:Object(y.jsx)(ee,{className:"btn btn-primary",onClick:this.handleAddService,children:"Add Service"})}),Object(y.jsx)("div",{children:e}),Object(y.jsx)(ee,{type:"button",onClick:this.handleAddService,className:"button-box btn btn-block btn-primary",children:"Add Service"})]})}}]),t}(a.a.Component),te=Object(i.b)((function(e){return e}),(function(e){return Object(l.b)({handleAddService:W,fetchServices:M},e)}))(ne),re=function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(Q,{}),Object(y.jsx)(te,{})]})},ae=t(42),ce=t.n(ae),se=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:b.UPDATE_FIELD_VALUE,payload:{field:e,value:n}}},ie=function(e){return Object(y.jsx)("input",Object(g.a)({className:"user-input"},e))},le=function(e){Object(_.a)(t,e);var n=Object(V.a)(t);function t(e){var r;return Object(x.a)(this,t),(r=n.call(this,e)).handleCancel=r.handleCancel.bind(Object(Z.a)(r)),r.updateFieldValue=r.updateFieldValue.bind(Object(Z.a)(r)),r.handleSubmitForm=r.handleSubmitForm.bind(Object(Z.a)(r)),r}return Object(C.a)(t,[{key:"handleCancel",value:function(){this.props.handleCancel()}},{key:"updateFieldValue",value:function(e,n){this.props.updateFieldValue(e,n.target.value)}},{key:"handleSubmitForm",value:function(e){e.preventDefault();var n=this.props.serviceForm.fields,t={name:n.name.value,version:n.version.value};this.props.saveService(t)}},{key:"render",value:function(){var e=this,n=this.props.serviceForm.fields;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Add Service"}),Object(y.jsxs)("form",{method:"POST",onSubmit:this.handleSubmitForm,children:[Object(y.jsx)("div",{className:"form-row",children:Object(y.jsxs)("div",{className:"col-md-7 col-lg-4",children:[Object(y.jsx)("label",{htmlFor:"name",children:"Name"}),Object(y.jsx)(ie,{name:"name",id:"name",value:n.name.value,onChange:function(n){return e.updateFieldValue("name",n)},className:"form-control","aria-describedby":"name-help-block"}),Object(y.jsx)("small",{id:"name-help-block",className:"form-text text-muted",children:n.name.msg})]})}),Object(y.jsx)("div",{className:"form-row",children:Object(y.jsxs)("div",{className:"col-sm-2 col-lg-1",children:[Object(y.jsx)("label",{htmlFor:"version",children:"Version"}),Object(y.jsx)(ie,{name:"version",id:"version",value:n.version.value,onChange:function(n){return e.updateFieldValue("version",n)},className:"form-control","aria-describedby":"version-help-block"}),Object(y.jsx)("small",{id:"version-help-block",className:"form-text text-muted",children:n.version.msg})]})}),Object(y.jsxs)("div",{children:[Object(y.jsx)(ee,{type:"button",className:"btn btn-light",onClick:this.handleCancel,children:"Cancel"}),Object(y.jsx)(ee,{type:"submit",className:"btn btn-primary",children:"Add Service"})]})]})]})}}]),t}(a.a.Component),oe=Object(i.b)((function(e){return e}),(function(e){return Object(l.b)({handleCancel:B,updateFieldValue:se,saveService:q},e)}))(le),ue=function(e){Object(_.a)(t,e);var n=Object(V.a)(t);function t(e){var r;return Object(x.a)(this,t),r=n.call(this,e),ce.a.setAppElement("div"),r}return Object(C.a)(t,[{key:"render",value:function(){var e="loading..";return this.props.isOpen&&(e=Object(y.jsx)(oe,{})),Object(y.jsx)(ce.a,{contentLabel:"New Service",isOpen:this.props.isOpen,children:e})}}]),t}(a.a.Component);ue.defaultProps={isOpen:!1};var de=ue,be=function(e){Object(_.a)(t,e);var n=Object(V.a)(t);function t(){return Object(x.a)(this,t),n.apply(this,arguments)}return Object(C.a)(t,[{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(re,{}),Object(y.jsx)(de,{isOpen:this.props.app.showModal})]})}}]),t}(a.a.Component);be.defaultProps={showServiceForm:!1};var ve=be,he=Object(i.b)((function(e){return e}),null)(ve);var pe=function(){return Object(y.jsx)("div",{id:"app",className:"App",children:Object(y.jsx)(he,{})})},je=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,154)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),r(e),a(e),c(e),s(e)}))};t(152);s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(i.a,{store:O,children:Object(y.jsx)(pe,{})})}),document.getElementById("root")),je()}},[[153,1,2]]]);
//# sourceMappingURL=main.6a12e448.chunk.js.map