(this["webpackJsonpmountain-pass"]=this["webpackJsonpmountain-pass"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),i=n(17),c=n.n(i),a=n(4),u=n(5),l=n(62),o=n(2),d=n.n(o),v={UPDATE_FIELD_VALUE:"UPDATE_FIELD_VALUE",SHOW_SERVICE_FORM:"SHOW_SERVICE_FORM",HIDE_SERVICE_FORM:"HIDE_SERVICE_FORM",SAVE_SERVICE_STARTED:"SAVE_SERVICE_STARTED",SAVE_SERVICE_SUCCESS:"SAVE_SERVICE_SUCCESS",SAVE_SERVICE_FAILURE:"SAVE_SERVICE_FAILURE",FETCH_SERVICES_STARTED:"FETCH_SERVICES_STARTED",FETCH_SERVICES_SUCCESS:"FETCH_SERVICES_SUCCESS",FETCH_SERVICES_FAILURE:"FETCH_SERVICES_FAILURE",UPDATE_QUERY:"UPDATE_QUERY",SET_FILTERED_SERVICES:"SET_FILTERED_SERVICES"},b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v.SHOW_SERVICE_FORM:return(e=d()(t)).showModal=!0,e;case v.HIDE_SERVICE_FORM:return(e=d()(t)).showModal=!1,e;default:return t}},p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v.FETCH_SERVICES_SUCCESS:return(e=d()(t)).services=n.payload.services,e;default:return t}},h={savedService:!1,fields:{name:{value:"",msg:""},version:{value:"",msg:""}}},j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v.HIDE_SERVICE_FORM:return(e=d()(t)).savedService=d()(h.savedService),e;case v.SAVE_SERVICE_SUCCESS:return(e=d()(t)).fields=d()(h.fields),e.savedService=d()(n.payload.service),e;case v.SAVE_SERVICE_FAILURE:e=d()(t);var r=n.payload.fields;return e.fields.name.msg=r.name.msg||h.fields.name.msg,e.fields.version.msg=r.version.msg||h.fields.version.msg,e;case v.UPDATE_FIELD_VALUE:return(e=d()(t)).fields[n.payload.field].value=n.payload.value,e;default:return t}},f=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v.SET_FILTERED_SERVICES:return(e=d()(t)).serviceList.services=n.payload,e;case v.UPDATE_QUERY:return(e=d()(t)).serviceListFilter.query=n.payload,e;default:return t}},m={isBusy:!1,showModal:!1,msg:{status:"info",msg:"default message"}},S={services:null},E={serviceListFilter:{query:""},serviceList:{services:null}},O=Object(u.c)({app:b,services:p,serviceForm:j,serviceListPanel:f}),x={app:m,services:S,serviceForm:h,serviceListPanel:E},y=Object(u.d)(O,x,Object(u.a)(l.a)),C=n(9),_=n(10),F=n(12),g=n(11),R=n(13),V=n(0),I=function(e){return Object(V.jsx)("button",Object(R.a)(Object(R.a)({className:"box btn btn-lg "},e),{},{children:e.children}))},A=function(e){return Object(V.jsxs)("div",{id:"quick-links",className:"section",children:[Object(V.jsx)("div",{className:"section-header__1",children:Object(V.jsx)("h2",{children:"Quick Links"})}),Object(V.jsxs)("div",{children:[Object(V.jsx)(I,{type:"button",className:"btn btn-primary btn-lg",onClick:e.handleAddService,children:"Add Service"}),Object(V.jsx)(I,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Gatsby Website"}),Object(V.jsx)(I,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Node Project"})]})]})},k=n(3),T=n.n(k),D=n(7),L=n(41),w=n.n(L),N="bWFyc29uOmVSZDc",U=function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,r=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,t=r.length>1&&void 0!==r[1]?r[1]:1,n="https://interview-web-service.mountainpass.com.au/api/v1/projects?page=".concat(t),e.prev=3,e.abrupt("return",w()(n,{method:"GET",headers:{Authorization:"Basic ".concat(N)}}));case 7:e.prev=7,e.t0=e.catch(3),console.error("Error fetching services"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(D.a)(T.a.mark((function e(){var t,n,r,s,i,c,a,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(null,1);case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,r=d()(n.data),1!==(s=n.totalPages)){e.next=12;break}return e.abrupt("return",r);case 12:if(!(s>2)){e.next=30;break}for(i=[],c=2;c<=s;c++)i.push(U(null,c));return e.next=17,Promise.all(i);case 17:a=e.sent,u=0;case 19:if(!(u<a.length)){e.next=27;break}return e.next=22,a[u].json();case 22:l=e.sent,r=r.concat(l.data);case 24:u++,e.next=19;break;case 27:return e.abrupt("return",r);case 30:return console.error("Invalid total pages when fetching services"),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(D.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={isValid:!0,fields:{name:{msg:""},version:{msg:""}}},t.name||(n.isValid=!1,n.fields.name.msg="Name of service is required"),t.version||(n.isValid=!1,n.fields.version.msg="Version is required"),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){try{var t=JSON.stringify(e);return w()("https://interview-web-service.mountainpass.com.au/api/v1/projects",{method:"POST",headers:{Authorization:"Basic ".concat(N),"Content-Type":"application/json"},body:t})}catch(n){console.error("Error POST saving a service"),console.error(n)}},M=function(){var e=Object(D.a)(T.a.mark((function e(t,n){var r,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new RegExp(t.query,"i"),s=n.filter((function(e){return r.test(e.name)})),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){return function(){var e=Object(D.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:n=e.sent,t(W(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(e){return{type:v.FETCH_SERVICES_SUCCESS,payload:{services:e}}},B=function(e){return{type:v.SET_FILTERED_SERVICES,payload:e}},Y=function(e){return{type:v.UPDATE_QUERY,payload:e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:v.SHOW_SERVICE_FORM,payload:{serviceId:e}}},z=function(){return{type:v.HIDE_SERVICE_FORM}},G=function(e){return function(){var t=Object(D.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(K()),t.next=3,H(e);case 3:if((r=t.sent).isValid){t.next=7;break}return n(X({fields:r.fields})),t.abrupt("return");case 7:return t.next=9,q(e);case 9:n(Z(e)),n(Q());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(){return{type:v.SAVE_SERVICE_STARTED}},Z=function(e){return{type:v.SAVE_SERVICE_SUCCESS,payload:{service:e}}},X=function(e){return{type:v.SAVE_SERVICE_FAILURE,payload:e}},$=Object(a.b)((function(e){return e}),(function(e){return Object(u.b)({handleAddService:J},e)}))(A),ee=n(6),te=function(e){Object(F.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(C.a)(this,n),(r=t.call(this,e)).updateQuery=r.updateQuery.bind(Object(ee.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(ee.a)(r)),r}return Object(_.a)(n,[{key:"updateQuery",value:function(e){e.preventDefault();var t=e.target.value;this.props.handleChange(t)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.handleSubmit(this.props.query)}},{key:"render",value:function(){return Object(V.jsx)("form",{method:"POST",onSubmit:this.handleSubmit,children:Object(V.jsx)("input",{type:"text",name:"query",value:this.props.query,onChange:this.updateQuery,placeholder:"Filter service"})})}}]),n}(s.a.Component),ne=Object(a.b)((function(e){return{query:e.serviceListPanel.serviceListFilter.query}}),(function(e){return Object(u.b)({handleChange:Y},e)}))(te),re=function(e){return Object(V.jsxs)("div",{className:"service-item",children:[Object(V.jsx)("h3",{children:e.name}),Object(V.jsxs)("div",{children:["version : ",e.version]})]})},se=function(e){var t=1;return Object(V.jsx)("div",{className:"group",children:e.services.map((function(e){return Object(V.jsx)(re,{name:e.name,version:e.version},t++)}))})},ie=n(18),ce=function(e){return Object(V.jsx)("button",Object(R.a)(Object(R.a)({},e),{},{children:e.children}))};ce.proptTypes={children:n.n(ie).a.string.isRequired};var ae=ce,ue=function(e){Object(F.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(C.a)(this,n),(r=t.call(this,e)).handleAddService=r.handleAddService.bind(Object(ee.a)(r)),r}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchServices()}},{key:"componentDidUpdate",value:function(e){this.filterServices(e)}},{key:"filterServices",value:function(){var e=Object(D.a)(T.a.mark((function e(t){var n,r,s,i,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.serviceListPanel.serviceListFilter.query,r=!!n,s=n!==t.serviceListPanel.serviceListFilter.query,i=this.props.services.services!==t.services.services,c=null,!s){e.next=16;break}if(!r){e.next=12;break}return e.next=9,M({query:n},this.props.services.services);case 9:c=e.sent,e.next=13;break;case 12:c=null;case 13:this.props.setFilteredServices(c),e.next=21;break;case 16:if(!r||!i){e.next=21;break}return e.next=19,M({query:n},this.props.services.services);case 19:c=e.sent,this.props.setFilteredServices(c);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddService",value:function(){this.props.handleAddService()}},{key:"render",value:function(){var e=this.props.serviceListPanel.serviceList.services||this.props.services.services,t=Object(V.jsx)("div",{children:"Loading.."});return Array.isArray(e)&&(t=Object(V.jsx)(se,{services:e})),Object(V.jsxs)("div",{id:"service-list-panel",className:"page__default section",children:[Object(V.jsx)("div",{className:"section-header__2",children:Object(V.jsx)("h2",{children:"Services"})}),Object(V.jsxs)("div",{children:[Object(V.jsx)(ne,{}),Object(V.jsx)(ae,{className:"btn btn-primary",onClick:this.handleAddService,children:"Add Service"})]}),Object(V.jsx)("div",{children:t}),Object(V.jsx)(ae,{type:"button",onClick:this.handleAddService,className:"button-box btn btn-block btn-primary",children:"Add Service"})]})}}]),n}(s.a.Component),le=Object(a.b)((function(e){return e}),(function(e){return Object(u.b)({handleAddService:J,setFilteredServices:B,fetchServices:Q},e)}))(ue),oe=function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)($,{}),Object(V.jsx)(le,{})]})},de=n(42),ve=n.n(de),be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:v.UPDATE_FIELD_VALUE,payload:{field:e,value:t}}},pe=function(e){return Object(V.jsx)("input",Object(R.a)({className:"user-input"},e))},he=function(e){Object(F.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(C.a)(this,n),(r=t.call(this,e)).handleCancel=r.handleCancel.bind(Object(ee.a)(r)),r.updateFieldValue=r.updateFieldValue.bind(Object(ee.a)(r)),r.handleSubmitForm=r.handleSubmitForm.bind(Object(ee.a)(r)),r}return Object(_.a)(n,[{key:"handleCancel",value:function(){this.props.handleCancel()}},{key:"updateFieldValue",value:function(e,t){this.props.updateFieldValue(e,t.target.value)}},{key:"handleSubmitForm",value:function(e){e.preventDefault();var t=this.props.serviceForm.fields,n={name:t.name.value,version:t.version.value};this.props.saveService(n)}},{key:"render",value:function(){var e=this,t=this.props.serviceForm.fields;return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Add Service"}),Object(V.jsxs)("form",{method:"POST",onSubmit:this.handleSubmitForm,children:[Object(V.jsx)("div",{className:"form-row",children:Object(V.jsxs)("div",{className:"col-md-7 col-lg-4",children:[Object(V.jsx)("label",{htmlFor:"name",children:"Name"}),Object(V.jsx)(pe,{name:"name",id:"name",value:t.name.value,onChange:function(t){return e.updateFieldValue("name",t)},className:"form-control","aria-describedby":"name-help-block"}),Object(V.jsx)("small",{id:"name-help-block",className:"form-text text-muted",children:t.name.msg})]})}),Object(V.jsx)("div",{className:"form-row",children:Object(V.jsxs)("div",{className:"col-sm-2 col-lg-1",children:[Object(V.jsx)("label",{htmlFor:"version",children:"Version"}),Object(V.jsx)(pe,{name:"version",id:"version",value:t.version.value,onChange:function(t){return e.updateFieldValue("version",t)},className:"form-control","aria-describedby":"version-help-block"}),Object(V.jsx)("small",{id:"version-help-block",className:"form-text text-muted",children:t.version.msg})]})}),Object(V.jsxs)("div",{children:[Object(V.jsx)(ae,{type:"button",className:"btn btn-light",onClick:this.handleCancel,children:"Cancel"}),Object(V.jsx)(ae,{type:"submit",className:"btn btn-primary",children:"Add Service"})]})]})]})}}]),n}(s.a.Component),je=Object(a.b)((function(e){return e}),(function(e){return Object(u.b)({handleCancel:z,updateFieldValue:be,saveService:G},e)}))(he),fe=function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)("h2",{children:"Saved"}),Object(V.jsxs)("div",{children:["The following service has been successfully saved :",Object(V.jsxs)("ol",{children:[Object(V.jsxs)("li",{children:["Name: ",e.name]}),Object(V.jsxs)("li",{children:["Version: ",e.version]})]})]}),Object(V.jsx)(ae,{className:"btn btn-primary",onClick:e.onDismiss,children:"OK"})]})},me=Object(a.b)((function(e){return{name:e.serviceForm.savedService.name,version:e.serviceForm.savedService.version}}),(function(e){return Object(u.b)({onDismiss:z},e)}))(fe),Se=function(e){Object(F.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(C.a)(this,n),r=t.call(this,e),ve.a.setAppElement("div"),r}return Object(_.a)(n,[{key:"render",value:function(){var e="loading..";return this.props.isOpen&&(e=this.props.savedService?Object(V.jsx)(me,{}):Object(V.jsx)(je,{})),Object(V.jsx)(ve.a,{contentLabel:"New Service",isOpen:this.props.isOpen,children:e})}}]),n}(s.a.Component);Se.defaultProps={isOpen:!1};var Ee=Se,Oe=function(e){Object(F.a)(n,e);var t=Object(g.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(oe,{}),Object(V.jsx)(Ee,{isOpen:this.props.app.showModal,savedService:this.props.serviceForm.savedService})]})}}]),n}(s.a.Component);Oe.defaultProps={showServiceForm:!1};var xe=Oe,ye=Object(a.b)((function(e){return e}),null)(xe);var Ce=function(){return Object(V.jsx)("div",{id:"app",className:"App",children:Object(V.jsx)(ye,{})})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),i(e),c(e)}))};n(152);c.a.render(Object(V.jsx)(s.a.StrictMode,{children:Object(V.jsx)(a.a,{store:y,children:Object(V.jsx)(Ce,{})})}),document.getElementById("root")),_e()}},[[153,1,2]]]);
//# sourceMappingURL=main.afd35b73.chunk.js.map