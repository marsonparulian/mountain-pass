(this["webpackJsonpmountain-pass"]=this["webpackJsonpmountain-pass"]||[]).push([[0],{152:function(e,n,t){},153:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(17),i=t.n(a),s=t(5),o=t(6),u=t(62),l=t(2),d=t.n(l),b={UPDATE_FIELD_VALUE:"UPDATE_FIELD_VALUE",SHOW_SERVICE_FORM:"SHOW_SERVICE_FORM",HIDE_SERVICE_FORM:"HIDE_SERVICE_FORM",FETCH_SERVICES_STARTED:"FETCH_SERVICES_STARTED",FETCH_SERVICES_SUCCESS:"FETCH_SERVICES_SUCCESS",FETCH_SERVICES_FAILURE:"FETCH_SERVICES_FAILURE",SAVE_SERVICE_STARTED:"SAVE_SERVICE_STARTED",SAVE_SERVICE_SUCCESS:"SAVE_SERVICE_SUCCESS",SAVE_SERVICE_FAILURE:"SAVE_SERVICE_FAILURE"},v=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SAVE_SERVICE_SUCCESS:return(e=d()(n)).showModal=!1,e;case b.SHOW_SERVICE_FORM:return(e=d()(n)).showModal=!0,e;case b.HIDE_SERVICE_FORM:return(e=d()(n)).showModal=!1,e;default:return n}},p=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.FETCH_SERVICES_SUCCESS:return(e=d()(n)).services=t.payload.services,e;default:return n}},h={fields:{name:{value:"Apple"},version:{value:"1.0.0"}}},j=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SAVE_SERVICE_SUCCESS:return(e=d()(n)).fields=d()(h.fields),e;case b.UPDATE_FIELD_VALUE:return(e=d()(n)).fields[t.payload.field].value=t.payload.value,e;default:return n}},S={isBusy:!1,showModal:!1,msg:{status:"info",msg:"default message"}},O={services:null},E=Object(o.c)({app:v,services:p,serviceForm:j}),f={app:S,services:O,serviceForm:h},m=Object(o.d)(E,f,Object(o.a)(u.a)),C=t(7),x=t(8),_=t(10),y=t(9),V=t(12),A=t(0),g=function(e){return Object(A.jsx)("button",Object(V.a)(Object(V.a)({className:"box btn btn-lg "},e),{},{children:e.children}))},F=function(e){return Object(A.jsxs)("div",{id:"quick-links",children:[Object(A.jsx)("div",{className:"section-header__1",children:Object(A.jsx)("h2",{children:"Quick Links"})}),Object(A.jsxs)("div",{children:[Object(A.jsx)(g,{type:"button",className:"btn btn-primary btn-lg",onClick:e.handleAddService,children:"Add Service"}),Object(A.jsx)(g,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Gatsby Website"}),Object(A.jsx)(g,{disabled:!0,className:"btn btn-lg disabled",children:"Deploy Node Project"})]})]})},R=t(3),I=t.n(R),T=t(14),k=t(41),w=t.n(k),D="bWFyc29uOmVSZDc",U=function(){var e=Object(T.a)(I.a.mark((function e(){var n,t,r=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:1,t="https://interview-web-service.mountainpass.com.au/api/v1/projects?page=".concat(n),e.prev=3,e.abrupt("return",w()(t,{method:"GET",headers:{Authorization:"Basic ".concat(D)}}));case 7:e.prev=7,e.t0=e.catch(3),console.error("Error fetching services"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(T.a)(I.a.mark((function e(){var n,t,r,c,a,i,s,o,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(null,1);case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,r=d()(t.data),1!==(c=t.totalPages)){e.next=12;break}return e.abrupt("return",r);case 12:if(!(c>2)){e.next=30;break}for(a=[],i=2;i<=c;i++)a.push(U(null,i));return e.next=17,Promise.all(a);case 17:s=e.sent,o=0;case 19:if(!(o<s.length)){e.next=27;break}return e.next=22,s[o].json();case 22:u=e.sent,r=r.concat(u.data);case 24:o++,e.next=19;break;case 27:return e.abrupt("return",r);case 30:return console.error("Invalid total pages when fetching services"),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){try{var n=JSON.stringify(e);return w()("https://interview-web-service.mountainpass.com.au/api/v1/projects",{method:"POST",headers:{Authorization:"Basic ".concat(D),"Content-Type":"application/json"},body:n})}catch(t){console.error("Error POST saving a service"),console.error(t)}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:b.SHOW_SERVICE_FORM,payload:{serviceId:e}}},M=function(){return{type:b.HIDE_SERVICE_FORM}},P=function(e){return function(){var n=Object(T.a)(I.a.mark((function n(t){var r,c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(W()),console.log("saving started",e),n.next=4,N(e);case 4:return r=n.sent,n.next=7,r.json();case 7:c=n.sent,console.log("result from response",c),t(B());case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},W=function(){return{type:b.SAVE_SERVICE_STARTED}},B=function(){return{type:b.SAVE_SERVICE_SUCCESS}},J=Object(s.b)((function(e){return e}),(function(e){return Object(o.b)({handleAddService:H},e)}))(F),q=function(){return function(){var e=Object(T.a)(I.a.mark((function e(n){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,n(z(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},z=function(e){return{type:b.FETCH_SERVICES_SUCCESS,payload:{services:e}}},G=t(11),Q=function(e){return Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{children:e.name}),Object(A.jsxs)("div",{children:["version : ",e.version]})]})},Z=function(e){return Object(A.jsx)("div",{className:"group",children:e.services.map((function(e){return Object(A.jsx)(Q,{name:e.name,version:e.version},e.name)}))})},K=t(18),X=function(e){return Object(A.jsx)("button",Object(V.a)(Object(V.a)({},e),{},{children:e.children}))};X.proptTypes={children:t.n(K).a.string.isRequired};var Y=X,$=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(C.a)(this,t),(r=n.call(this,e)).handleAddService=r.handleAddService.bind(Object(G.a)(r)),r}return Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchServices()}},{key:"handleAddService",value:function(){this.props.handleAddService()}},{key:"render",value:function(){var e=Object(A.jsx)("div",{children:"Loading.."});return Array.isArray(this.props.services.services)&&(e=Object(A.jsx)(Z,{services:this.props.services.services})),Object(A.jsxs)("div",{id:"service-list-panel",className:"page__default",children:[Object(A.jsx)("div",{className:"section-header__2",children:Object(A.jsx)("h2",{children:"Services"})}),Object(A.jsx)("div",{children:Object(A.jsx)(Y,{className:"btn btn-primary",onClick:this.handleAddService,children:"Add Service"})}),Object(A.jsx)("div",{children:e}),Object(A.jsx)(Y,{type:"button",onClick:this.handleAddService,className:"button-box btn btn-block btn-primary",children:"Add Service"})]})}}]),t}(c.a.Component),ee=Object(s.b)((function(e){return e}),(function(e){return Object(o.b)({handleAddService:H,fetchServices:q},e)}))($),ne=function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(J,{}),Object(A.jsx)(ee,{})]})},te=t(42),re=t.n(te),ce=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:b.UPDATE_FIELD_VALUE,payload:{field:e,value:n}}},ae=function(e){return Object(A.jsx)("input",Object(V.a)({className:"user-input"},e))},ie=function(e){return Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:e.for,children:e.labelText}),e.children]})},se=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(C.a)(this,t),(r=n.call(this,e)).handleCancel=r.handleCancel.bind(Object(G.a)(r)),r.updateFieldValue=r.updateFieldValue.bind(Object(G.a)(r)),r.handleSubmitForm=r.handleSubmitForm.bind(Object(G.a)(r)),r}return Object(x.a)(t,[{key:"handleCancel",value:function(){this.props.handleCancel()}},{key:"updateFieldValue",value:function(e,n){this.props.updateFieldValue(e,n.target.value)}},{key:"handleSubmitForm",value:function(e){e.preventDefault();var n=this.props.serviceForm.fields,t={name:n.name.value,version:n.version.value};console.log("checking props..",this.props),console.log("before saving..",t),this.props.saveService(t)}},{key:"render",value:function(){var e=this,n=this.props.serviceForm.fields;return Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"Add Service"}),Object(A.jsxs)("form",{method:"POST",onSubmit:this.handleSubmitForm,children:[Object(A.jsx)(ie,{labelText:"Name",for:"name",children:Object(A.jsx)(ae,{name:"name",id:"name",value:n.name.value,onChange:function(n){return e.updateFieldValue("name",n)}})}),Object(A.jsx)(ie,{labelText:"Version",for:"version",children:Object(A.jsx)(ae,{name:"version",id:"version",value:n.version.value,onChange:function(n){return e.updateFieldValue("version",n)}})}),Object(A.jsxs)("div",{children:[Object(A.jsx)(Y,{type:"button",onClick:this.handleCancel,children:"Cancel"}),Object(A.jsx)(Y,{type:"submit",className:"primary",children:"Add Service"})]})]})]})}}]),t}(c.a.Component),oe=Object(s.b)((function(e){return e}),(function(e){return Object(o.b)({handleCancel:M,updateFieldValue:ce,saveService:P},e)}))(se),ue=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(e){var r;return Object(C.a)(this,t),r=n.call(this,e),re.a.setAppElement("div"),r}return Object(x.a)(t,[{key:"render",value:function(){var e="loading..";return this.props.isOpen&&(e=Object(A.jsx)(oe,{})),Object(A.jsx)(re.a,{contentLabel:"New Service",isOpen:this.props.isOpen,children:e})}}]),t}(c.a.Component);ue.defaultProps={isOpen:!1};var le=ue,de=function(e){Object(_.a)(t,e);var n=Object(y.a)(t);function t(){return Object(C.a)(this,t),n.apply(this,arguments)}return Object(x.a)(t,[{key:"render",value:function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(ne,{}),Object(A.jsx)(le,{isOpen:this.props.app.showModal})]})}}]),t}(c.a.Component);de.defaultProps={showServiceForm:!1};var be=de,ve=Object(s.b)((function(e){return e}),null)(be);var pe=function(){return Object(A.jsx)("div",{id:"app",className:"App",children:Object(A.jsx)(ve,{})})},he=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,154)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))};t(152);i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(s.a,{store:m,children:Object(A.jsx)(pe,{})})}),document.getElementById("root")),he()}},[[153,1,2]]]);
//# sourceMappingURL=main.b7da3118.chunk.js.map